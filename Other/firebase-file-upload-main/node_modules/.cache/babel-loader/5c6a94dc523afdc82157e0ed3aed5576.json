{"ast":null,"code":"import _toConsumableArray from\"/Users/adityaasthana/cs222/firebase-file-upload-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/adityaasthana/cs222/firebase-file-upload-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import{useState,useEffect}from\"react\";import{ref,uploadBytes,getDownloadURL,listAll,list}from\"firebase/storage\";import{storage}from\"./firebase\";import{v4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),imageUpload=_useState2[0],setImageUpload=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),imageUrls=_useState4[0],setImageUrls=_useState4[1];var imagesListRef=ref(storage,\"images/\");var uploadFile=function uploadFile(){if(imageUpload==null)return;var imageRef=ref(storage,\"images/\".concat(imageUpload.name+v4()));uploadBytes(imageRef,imageUpload).then(function(snapshot){getDownloadURL(snapshot.ref).then(function(url){setImageUrls(function(prev){return[].concat(_toConsumableArray(prev),[url]);});});});};useEffect(function(){listAll(imagesListRef).then(function(response){response.items.forEach(function(item){getDownloadURL(item).then(function(url){setImageUrls(function(prev){return[].concat(_toConsumableArray(prev),[url]);});});});});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(event){setImageUpload(event.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{onClick:uploadFile,children:\" Upload Image\"}),imageUrls.map(function(url){return/*#__PURE__*/_jsx(\"img\",{src:url});})]});}export default App;","map":{"version":3,"sources":["/Users/adityaasthana/cs222/firebase-file-upload-main/src/App.js"],"names":["useState","useEffect","ref","uploadBytes","getDownloadURL","listAll","list","storage","v4","App","imageUpload","setImageUpload","imageUrls","setImageUrls","imagesListRef","uploadFile","imageRef","name","then","snapshot","url","prev","response","items","forEach","item","event","target","files","map"],"mappings":"4RAAA,MAAO,WAAP,CACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OACEC,GADF,CAEEC,WAFF,CAGEC,cAHF,CAIEC,OAJF,CAKEC,IALF,KAMO,kBANP,CAOA,OAASC,OAAT,KAAwB,YAAxB,CACA,OAASC,EAAT,KAAmB,MAAnB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAsCT,QAAQ,CAAC,IAAD,CAA9C,wCAAOU,WAAP,eAAoBC,cAApB,eACA,eAAkCX,QAAQ,CAAC,EAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eAEA,GAAMC,CAAAA,aAAa,CAAGZ,GAAG,CAACK,OAAD,CAAU,SAAV,CAAzB,CACA,GAAMQ,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAIL,WAAW,EAAI,IAAnB,CAAyB,OACzB,GAAMM,CAAAA,QAAQ,CAAGd,GAAG,CAACK,OAAD,kBAAoBG,WAAW,CAACO,IAAZ,CAAmBT,EAAE,EAAzC,EAApB,CACAL,WAAW,CAACa,QAAD,CAAWN,WAAX,CAAX,CAAmCQ,IAAnC,CAAwC,SAACC,QAAD,CAAc,CACpDf,cAAc,CAACe,QAAQ,CAACjB,GAAV,CAAd,CAA6BgB,IAA7B,CAAkC,SAACE,GAAD,CAAS,CACzCP,YAAY,CAAC,SAACQ,IAAD,qCAAcA,IAAd,GAAoBD,GAApB,IAAD,CAAZ,CACD,CAFD,EAGD,CAJD,EAKD,CARD,CAUAnB,SAAS,CAAC,UAAM,CACdI,OAAO,CAACS,aAAD,CAAP,CAAuBI,IAAvB,CAA4B,SAACI,QAAD,CAAc,CACxCA,QAAQ,CAACC,KAAT,CAAeC,OAAf,CAAuB,SAACC,IAAD,CAAU,CAC/BrB,cAAc,CAACqB,IAAD,CAAd,CAAqBP,IAArB,CAA0B,SAACE,GAAD,CAAS,CACjCP,YAAY,CAAC,SAACQ,IAAD,qCAAcA,IAAd,GAAoBD,GAApB,IAAD,CAAZ,CACD,CAFD,EAGD,CAJD,EAKD,CAND,EAOD,CARQ,CAQN,EARM,CAAT,CAUA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,cACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,kBAACM,KAAD,CAAW,CACnBf,cAAc,CAACe,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAd,CACD,CAJH,EADF,cAOE,eAAQ,OAAO,CAAEb,UAAjB,2BAPF,CAQGH,SAAS,CAACiB,GAAV,CAAc,SAACT,GAAD,CAAS,CACtB,mBAAO,YAAK,GAAG,CAAEA,GAAV,EAAP,CACD,CAFA,CARH,GADF,CAcD,CAED,cAAeX,CAAAA,GAAf","sourcesContent":["import \"./App.css\";\nimport { useState, useEffect } from \"react\";\nimport {\n  ref,\n  uploadBytes,\n  getDownloadURL,\n  listAll,\n  list,\n} from \"firebase/storage\";\nimport { storage } from \"./firebase\";\nimport { v4 } from \"uuid\";\n\nfunction App() {\n  const [imageUpload, setImageUpload] = useState(null);\n  const [imageUrls, setImageUrls] = useState([]);\n\n  const imagesListRef = ref(storage, \"images/\");\n  const uploadFile = () => {\n    if (imageUpload == null) return;\n    const imageRef = ref(storage, `images/${imageUpload.name + v4()}`);\n    uploadBytes(imageRef, imageUpload).then((snapshot) => {\n      getDownloadURL(snapshot.ref).then((url) => {\n        setImageUrls((prev) => [...prev, url]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    listAll(imagesListRef).then((response) => {\n      response.items.forEach((item) => {\n        getDownloadURL(item).then((url) => {\n          setImageUrls((prev) => [...prev, url]);\n        });\n      });\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <input\n        type=\"file\"\n        onChange={(event) => {\n          setImageUpload(event.target.files[0]);\n        }}\n      />\n      <button onClick={uploadFile}> Upload Image</button>\n      {imageUrls.map((url) => {\n        return <img src={url} />;\n      })}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}